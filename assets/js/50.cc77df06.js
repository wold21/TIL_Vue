(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{438:function(t,s,a){t.exports=a.p+"assets/img/fuction_procedure.b5f68786.png"},519:function(t,s,a){"use strict";a.r(s);var r=a(17),e=Object(r.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"stored-procedure-1부"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#stored-procedure-1부"}},[t._v("#")]),t._v(" Stored procedure 1부")]),t._v(" "),s("h2",{attrs:{id:"stored-procedure이란"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#stored-procedure이란"}},[t._v("#")]),t._v(" Stored procedure이란?")]),t._v(" "),s("ul",[s("li",[t._v("사용자가 정의한 프로시저")]),t._v(" "),s("li",[t._v("RDBMS에 저장되고 사용되는 프로시저")]),t._v(" "),s("li",[s("code",[t._v("구체적인 하나의 작업을 수행한다.")])])]),t._v(" "),s("h3",{attrs:{id:"예제"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#예제"}},[t._v("#")]),t._v(" 예제")]),t._v(" "),s("h4",{attrs:{id:"두-정수의-곱셈-결과를-가져오는-프로시저를-작성하자"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#두-정수의-곱셈-결과를-가져오는-프로시저를-작성하자"}},[t._v("#")]),t._v(" 두 정수의 곱셈 결과를 가져오는 프로시저를 작성하자.")]),t._v(" "),s("h5",{attrs:{id:"프로시저-정의"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#프로시저-정의"}},[t._v("#")]),t._v(" 프로시저 정의")]),t._v(" "),s("div",{staticClass:"language-SQL extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("delimiter")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CREATE")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("PROCEDURE")]),t._v(" product"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("IN")]),t._v(" a "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("IN")]),t._v(" b "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("OUT")]),t._v(" result "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- INPUT 파라미터는 IN, OUTPUT 파라미터는 OUT ")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- INPUT은 생략 가능하지만 OUT은 명시적으로 작성해줘야한다.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("BEGIN")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SET")]),t._v(" result "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" a "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" b"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("END")]),t._v("\n$$\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("delimiter")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h5",{attrs:{id:"프로시저-사용"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#프로시저-사용"}},[t._v("#")]),t._v(" 프로시저 사용")]),t._v(" "),s("div",{staticClass:"language-SQL extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CALL")]),t._v(" product"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("7")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@result")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SELECT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@result")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h4",{attrs:{id:"두-정수를-맞바꾸는-프로시저를-작성하자"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#두-정수를-맞바꾸는-프로시저를-작성하자"}},[t._v("#")]),t._v(" 두 정수를 맞바꾸는 프로시저를 작성하자.")]),t._v(" "),s("h5",{attrs:{id:"프로시저-정의-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#프로시저-정의-2"}},[t._v("#")]),t._v(" 프로시저 정의")]),t._v(" "),s("div",{staticClass:"language-SQL extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("delimiter")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CREATE")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("PROCEDURE")]),t._v(" swqp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INOUT")]),t._v(" a "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INOUT")]),t._v(" b "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("BEGIN")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SET")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@temp")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" a"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SET")]),t._v(" a "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" b"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SET")]),t._v(" b "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@temp")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("END")]),t._v("\n$$\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("delimiter")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h5",{attrs:{id:"프로시저-사용-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#프로시저-사용-2"}},[t._v("#")]),t._v(" 프로시저 사용")]),t._v(" "),s("div",{staticClass:"language-SQL extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SET")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@a")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@b")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("7")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CALL")]),t._v(" swap"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@a")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@b")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h4",{attrs:{id:"각-부서별-평균-연봉을-가져오는-프로시저를-작성하자"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#각-부서별-평균-연봉을-가져오는-프로시저를-작성하자"}},[t._v("#")]),t._v(" 각 부서별 평균 연봉을 가져오는 프로시저를 작성하자.")]),t._v(" "),s("h5",{attrs:{id:"프로시저-정의-3"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#프로시저-정의-3"}},[t._v("#")]),t._v(" 프로시저 정의")]),t._v(" "),s("div",{staticClass:"language-SQL extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("delimiter")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CREATE")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("PROCEDURE")]),t._v(" get_dept_avg_salary"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("BEGIN")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SELECT")]),t._v(" dept_id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("avg")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("salary"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("FROM")]),t._v(" employee\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("GROUP")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("BY")]),t._v(" dept_id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("END")]),t._v("\n$$\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("delimiter")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h5",{attrs:{id:"프로시저-사용-3"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#프로시저-사용-3"}},[t._v("#")]),t._v(" 프로시저 사용")]),t._v(" "),s("div",{staticClass:"language-SQL extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CALL")]),t._v(" get_dept_avg_salary"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h4",{attrs:{id:"사용자가-프로필-닉네임을-바꾸면-이전-닉네임을-로그에-저장하고-새-닉네임으로-업데이트하는-프로시저를-작성해보자"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#사용자가-프로필-닉네임을-바꾸면-이전-닉네임을-로그에-저장하고-새-닉네임으로-업데이트하는-프로시저를-작성해보자"}},[t._v("#")]),t._v(" 사용자가 프로필 닉네임을 바꾸면 이전 닉네임을 로그에 저장하고 새 닉네임으로 업데이트하는 프로시저를 작성해보자.")]),t._v(" "),s("h5",{attrs:{id:"프로시저-정의-4"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#프로시저-정의-4"}},[t._v("#")]),t._v(" 프로시저 정의")]),t._v(" "),s("div",{staticClass:"language-SQL extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("delimiter")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CREATE")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("PROCEDURE")]),t._v(" change_nickname"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("user_id "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INT")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" new_nick "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("varchar")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("BEGIN")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INSERT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INTO")]),t._v(" nickname_logs "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SELECT")]),t._v(" id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" nickname"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("now")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("FROM")]),t._v(" users "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("WHERE")]),t._v(" id "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" user_id\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("UPDATE")]),t._v(" users "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SET")]),t._v(" nickname "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" new_nick "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("WHERE")]),t._v(" id "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" user_id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("END")]),t._v("\n$$\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("delimiter")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h5",{attrs:{id:"프로시저-사용-4"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#프로시저-사용-4"}},[t._v("#")]),t._v(" 프로시저 사용")]),t._v(" "),s("div",{staticClass:"language-SQL extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CALL")]),t._v(" change_nickname"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'TAZO'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h3",{attrs:{id:"stored-procedure-정리"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#stored-procedure-정리"}},[t._v("#")]),t._v(" Stored procedure 정리")]),t._v(" "),s("ul",[s("li",[t._v("이외에도 조건문을 통해 분기처리를 하거나")]),t._v(" "),s("li",[t._v("반복문을 수행하거나")]),t._v(" "),s("li",[t._v("에러를 핸들링하거나 에러를 일으키는 등의 다양한 로직을 정의할 수 있다")])]),t._v(" "),s("h2",{attrs:{id:"stored-function-vs-stored-procedure"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#stored-function-vs-stored-procedure"}},[t._v("#")]),t._v(" Stored function vs Stored procedure")]),t._v(" "),s("img",{attrs:{src:a(438),alt:"fuction_procedure",height:"300"}}),t._v(" "),s("ul",[s("li",[t._v("큰 특징으로 SQL statement에서 호출이 가능하냐 불가능 하냐가 하나 있고")]),t._v(" "),s("li",[t._v("반환값 필수 여부")]),t._v(" "),s("li",[t._v("transaction이 가능한가에 대한 여부를 중점적으로 기억하면 좋을 것 같다.")]),t._v(" "),s("li",[t._v("마지막으로 주된 사용 목적에 대해서도 기억하면 좋겠다.")])]),t._v(" "),s("h3",{attrs:{id:"이외에도-확인해봐야-할-점"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#이외에도-확인해봐야-할-점"}},[t._v("#")]),t._v(" 이외에도 확인해봐야 할 점")]),t._v(" "),s("ul",[s("li",[t._v("다른 function/procedure를 호출할 수 있는지")]),t._v(" "),s("li",[t._v("resultset(=table)을 반환할 수 있는지")]),t._v(" "),s("li",[t._v("precompiled execution plan을 만드는지\n"),s("ul",[s("li",[t._v("프로시저나 함수나 미리 RDBMS가 컴파일 시켜서 실행계획을 만들어 놓는지.")])])]),t._v(" "),s("li",[t._v("try-catch를 사용할 수 있는지")])]),t._v(" "),s("h2",{attrs:{id:"마무리"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#마무리"}},[t._v("#")]),t._v(" 마무리")]),t._v(" "),s("p",[t._v("이번 영상을 보면서 예전에 어렴풋이 들었던 프로시저와 함수의 차이점에 대해서 배울 수 있었다. 이전에도 안써봤고 이후에도 쓸지 안쓸지 모르겠지만 써야할 때 기억이 났으면 좋겠다. (물론 검색하면 금방이지만)")])])}),[],!1,null,null,null);s.default=e.exports}}]);