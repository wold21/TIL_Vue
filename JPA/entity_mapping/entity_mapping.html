<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>엔티티 매핑 | 코드를 부르자</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="stylesheet" href="/TIL_Vue/main.css">
    <meta name="description" content="Hyuk's tech Blog">
    <meta name="last-updated" content="2025-08-06T09:41:41.426Z">
    
    <link rel="preload" href="/TIL_Vue/assets/css/0.styles.025a8950.css" as="style"><link rel="preload" href="/TIL_Vue/assets/js/app.3d91fea7.js" as="script"><link rel="preload" href="/TIL_Vue/assets/js/2.1f7f954a.js" as="script"><link rel="preload" href="/TIL_Vue/assets/js/4.011e6a29.js" as="script"><link rel="preload" href="/TIL_Vue/assets/js/54.b4aed006.js" as="script"><link rel="prefetch" href="/TIL_Vue/assets/js/10.ff3a4836.js"><link rel="prefetch" href="/TIL_Vue/assets/js/11.702e6d17.js"><link rel="prefetch" href="/TIL_Vue/assets/js/12.b92c7d7f.js"><link rel="prefetch" href="/TIL_Vue/assets/js/13.f7c111c1.js"><link rel="prefetch" href="/TIL_Vue/assets/js/14.0117a655.js"><link rel="prefetch" href="/TIL_Vue/assets/js/15.0242e24b.js"><link rel="prefetch" href="/TIL_Vue/assets/js/16.cae9291e.js"><link rel="prefetch" href="/TIL_Vue/assets/js/17.8e507d3f.js"><link rel="prefetch" href="/TIL_Vue/assets/js/18.9e68361a.js"><link rel="prefetch" href="/TIL_Vue/assets/js/19.49404600.js"><link rel="prefetch" href="/TIL_Vue/assets/js/20.c0d89e3a.js"><link rel="prefetch" href="/TIL_Vue/assets/js/21.64e2bff9.js"><link rel="prefetch" href="/TIL_Vue/assets/js/22.51ee7c50.js"><link rel="prefetch" href="/TIL_Vue/assets/js/23.1d9b1dfd.js"><link rel="prefetch" href="/TIL_Vue/assets/js/24.fe74a661.js"><link rel="prefetch" href="/TIL_Vue/assets/js/25.391bd5c8.js"><link rel="prefetch" href="/TIL_Vue/assets/js/26.f26e4201.js"><link rel="prefetch" href="/TIL_Vue/assets/js/27.af54518a.js"><link rel="prefetch" href="/TIL_Vue/assets/js/28.21dfb380.js"><link rel="prefetch" href="/TIL_Vue/assets/js/29.c694bb3a.js"><link rel="prefetch" href="/TIL_Vue/assets/js/3.9d92fd87.js"><link rel="prefetch" href="/TIL_Vue/assets/js/30.ef4dc4db.js"><link rel="prefetch" href="/TIL_Vue/assets/js/31.b31a1fcb.js"><link rel="prefetch" href="/TIL_Vue/assets/js/32.14cdc338.js"><link rel="prefetch" href="/TIL_Vue/assets/js/33.8743ab2b.js"><link rel="prefetch" href="/TIL_Vue/assets/js/34.036b696e.js"><link rel="prefetch" href="/TIL_Vue/assets/js/35.cf2f290f.js"><link rel="prefetch" href="/TIL_Vue/assets/js/36.d8548356.js"><link rel="prefetch" href="/TIL_Vue/assets/js/37.6beb86f9.js"><link rel="prefetch" href="/TIL_Vue/assets/js/38.cb82633f.js"><link rel="prefetch" href="/TIL_Vue/assets/js/39.d14a4dd6.js"><link rel="prefetch" href="/TIL_Vue/assets/js/40.607d5664.js"><link rel="prefetch" href="/TIL_Vue/assets/js/41.1026b0bb.js"><link rel="prefetch" href="/TIL_Vue/assets/js/42.f0c1c96e.js"><link rel="prefetch" href="/TIL_Vue/assets/js/43.0ddd3638.js"><link rel="prefetch" href="/TIL_Vue/assets/js/44.af31f84f.js"><link rel="prefetch" href="/TIL_Vue/assets/js/45.7ddfc661.js"><link rel="prefetch" href="/TIL_Vue/assets/js/46.9c115028.js"><link rel="prefetch" href="/TIL_Vue/assets/js/47.2511e8c8.js"><link rel="prefetch" href="/TIL_Vue/assets/js/48.7884e23f.js"><link rel="prefetch" href="/TIL_Vue/assets/js/49.8a93061d.js"><link rel="prefetch" href="/TIL_Vue/assets/js/5.3429ee86.js"><link rel="prefetch" href="/TIL_Vue/assets/js/50.233c58e3.js"><link rel="prefetch" href="/TIL_Vue/assets/js/51.938c4a3c.js"><link rel="prefetch" href="/TIL_Vue/assets/js/52.165dcf6b.js"><link rel="prefetch" href="/TIL_Vue/assets/js/53.c664b87d.js"><link rel="prefetch" href="/TIL_Vue/assets/js/55.e1e7ac6d.js"><link rel="prefetch" href="/TIL_Vue/assets/js/56.1e864da7.js"><link rel="prefetch" href="/TIL_Vue/assets/js/57.59cefd8f.js"><link rel="prefetch" href="/TIL_Vue/assets/js/58.ec401a77.js"><link rel="prefetch" href="/TIL_Vue/assets/js/59.221fd913.js"><link rel="prefetch" href="/TIL_Vue/assets/js/6.92bd9c75.js"><link rel="prefetch" href="/TIL_Vue/assets/js/60.0d0c6e09.js"><link rel="prefetch" href="/TIL_Vue/assets/js/61.917ebad5.js"><link rel="prefetch" href="/TIL_Vue/assets/js/62.672cf001.js"><link rel="prefetch" href="/TIL_Vue/assets/js/63.74b2e69a.js"><link rel="prefetch" href="/TIL_Vue/assets/js/64.67aedde4.js"><link rel="prefetch" href="/TIL_Vue/assets/js/65.2cee85dc.js"><link rel="prefetch" href="/TIL_Vue/assets/js/66.30055fd6.js"><link rel="prefetch" href="/TIL_Vue/assets/js/67.180f6968.js"><link rel="prefetch" href="/TIL_Vue/assets/js/68.6a5b0358.js"><link rel="prefetch" href="/TIL_Vue/assets/js/69.8c1d14de.js"><link rel="prefetch" href="/TIL_Vue/assets/js/7.23265f69.js"><link rel="prefetch" href="/TIL_Vue/assets/js/70.79bd1ea7.js"><link rel="prefetch" href="/TIL_Vue/assets/js/71.f2cd3b9a.js"><link rel="prefetch" href="/TIL_Vue/assets/js/72.6aec4738.js"><link rel="prefetch" href="/TIL_Vue/assets/js/73.2fa7220e.js"><link rel="prefetch" href="/TIL_Vue/assets/js/74.9d446c1e.js"><link rel="prefetch" href="/TIL_Vue/assets/js/75.4e5f195a.js"><link rel="prefetch" href="/TIL_Vue/assets/js/76.f60aea4f.js"><link rel="prefetch" href="/TIL_Vue/assets/js/77.2ccd7b73.js"><link rel="prefetch" href="/TIL_Vue/assets/js/78.ffdbb786.js"><link rel="prefetch" href="/TIL_Vue/assets/js/79.4951902d.js"><link rel="prefetch" href="/TIL_Vue/assets/js/8.85430645.js"><link rel="prefetch" href="/TIL_Vue/assets/js/80.0941c54b.js"><link rel="prefetch" href="/TIL_Vue/assets/js/81.66a813dd.js"><link rel="prefetch" href="/TIL_Vue/assets/js/82.32be5c7e.js"><link rel="prefetch" href="/TIL_Vue/assets/js/83.1c9143f7.js"><link rel="prefetch" href="/TIL_Vue/assets/js/84.0cc11cd5.js"><link rel="prefetch" href="/TIL_Vue/assets/js/85.ccc98d18.js"><link rel="prefetch" href="/TIL_Vue/assets/js/86.808b2828.js"><link rel="prefetch" href="/TIL_Vue/assets/js/9.bf11fdb6.js">
    <link rel="stylesheet" href="/TIL_Vue/assets/css/0.styles.025a8950.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/TIL_Vue/" class="home-link router-link-active"><img src="https://cdn.shopify.com/s/files/1/0276/4803/2851/files/10375_-_Inferno_22_09_20_122834a1-bdd3-4886-b963-b53234fc46e5_480x480.jpg?v=1604507899" alt="코드를 부르자" class="logo"> <span class="site-name can-hide">코드를 부르자</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://github.com/wold21/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://companion-tazo.tistory.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/wold21/TIL_Vue" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://github.com/wold21/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://companion-tazo.tistory.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/wold21/TIL_Vue" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>🌏 Network</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>🛢️ Database</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>🕸 Web</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>🧩 DataStructure</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>🦣Gradle</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>🌱 Spring</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>☕ Java</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>🥅 JPA</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/TIL_Vue/JPA/Summary/summary.html" class="sidebar-link">요약</a></li><li><a href="/TIL_Vue/JPA/Intro/Intro.html" class="sidebar-link">JPA Intro</a></li><li><a href="/TIL_Vue/JPA/emf_jpql/emf_jpql.html" class="sidebar-link">Entity Manager Factory &amp; Entity Manager &amp; Transaction &amp; JPQL</a></li><li><a href="/TIL_Vue/JPA/persistence_manage/persistence_manage.html" class="sidebar-link">영속성 관리</a></li><li><a href="/TIL_Vue/JPA/entity_mapping/entity_mapping.html" aria-current="page" class="active sidebar-link">엔티티 매핑</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/TIL_Vue/JPA/entity_mapping/entity_mapping.html#🚫-주의-사항" class="sidebar-link">🚫 주의 사항</a></li><li class="sidebar-sub-header"><a href="/TIL_Vue/JPA/entity_mapping/entity_mapping.html#기본-키-직접-할당-전략" class="sidebar-link">기본 키 직접 할당 전략</a></li><li class="sidebar-sub-header"><a href="/TIL_Vue/JPA/entity_mapping/entity_mapping.html#⭐identity-전략" class="sidebar-link">⭐IDENTITY 전략</a></li><li class="sidebar-sub-header"><a href="/TIL_Vue/JPA/entity_mapping/entity_mapping.html#⭐sequence-전략" class="sidebar-link">⭐SEQUENCE 전략</a></li><li class="sidebar-sub-header"><a href="/TIL_Vue/JPA/entity_mapping/entity_mapping.html#⭐-column" class="sidebar-link">⭐ @Column</a></li><li class="sidebar-sub-header"><a href="/TIL_Vue/JPA/entity_mapping/entity_mapping.html#⭐-enumerated" class="sidebar-link">⭐@Enumerated</a></li><li class="sidebar-sub-header"><a href="/TIL_Vue/JPA/entity_mapping/entity_mapping.html#⭐-temporal" class="sidebar-link">⭐@Temporal</a></li><li class="sidebar-sub-header"><a href="/TIL_Vue/JPA/entity_mapping/entity_mapping.html#⭐-lob" class="sidebar-link">⭐@Lob</a></li><li class="sidebar-sub-header"><a href="/TIL_Vue/JPA/entity_mapping/entity_mapping.html#⭐-transient" class="sidebar-link">⭐@Transient</a></li><li class="sidebar-sub-header"><a href="/TIL_Vue/JPA/entity_mapping/entity_mapping.html#⭐-access" class="sidebar-link">⭐@Access</a></li></ul></li><li><a href="/TIL_Vue/JPA/relation_intro/relation_intro.html" class="sidebar-link">연관관계 매핑 기초</a></li><li><a href="/TIL_Vue/JPA/relation_mapping/relation_mapping.html" class="sidebar-link">다양한 연관관계 매핑</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>🥪 JavaScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>🌊 jQuery</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>⛓ Ajax</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>🍃 Thymeleaf</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>🥴 Mustache</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>😖 HandleBars.js</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>🦋 Debug</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>🎡 Tech</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="엔티티-매핑"><a href="#엔티티-매핑" class="header-anchor">#</a> 엔티티 매핑</h1> <p>jpa를 사용하는 데 가장 중요한 것은 엔티티와 테이블을 정확히 매핑하는 것이다. 따라서 매핑 어노테이션을 숙지하고 올바르게 사용해야한다.</p> <ul><li>객체와 테이블 매핑 → @Entity, @Table</li> <li>기본 키 매핑 → @Id</li> <li>필드와 컬럼 매핑 → @Column</li> <li>연관관계 매핑 → @ManyToOne, @JoinColumn</li></ul> <aside>
💡 어노테이션이 아니라 xml로 매핑 정보를 사용하는 방법도 있다고 한다.
</aside> <h1 id="entity"><a href="#entity" class="header-anchor">#</a> @Entity</h1> <p>jpa를 사용해서 테이블과 매핑할 클래스는 필수로 사용해야하는 어노테이션.</p> <p>옵션으로 name이 있다. 설정하지 않는다면 기본값(클래스 명)을 사용한다.</p> <ul><li>주의사항
<ul><li>기본 생성자는 필수다.</li> <li>final 클래스, enum, interface, inner 클래스에는 사용할 수 없다.</li> <li>저장할 필드에 final을 사용하면 안된다.</li></ul></li></ul> <p>jpa가 엔티티를 생성할 때 기본 생성자를 사용한다. 자바는 생성자 선언이 없으면 기본 생성자를 만들어 준다.</p> <h1 id="table"><a href="#table" class="header-anchor">#</a> @Table</h1> <p>엔티티와 매핑할 테이블을 지정한다. 생략하면 매핑한 엔티티 이름을 테이블 이름으로 사용한다.</p> <table><thead><tr><th>속성</th> <th>기능</th> <th>기본값</th></tr></thead> <tbody><tr><td>name</td> <td>매핑할 테이블 이름</td> <td>엔티티 이름을 사용한다</td></tr> <tr><td>catalog</td> <td>catalog기능이 있는 DB에서 catalog를 매핑한다.</td> <td></td></tr> <tr><td>schema</td> <td>schema기능이 있는 DB에서 schema를 매핑한다.</td> <td></td></tr> <tr><td>uniqueConstraints(DDL)</td> <td>DDL 생성 시에 유니크 제약 조건을 만든다. 2개 이상의 복합 유니크 제약 조건도 만들 수 있다. 참고로 이 기능은 스키마 자동 생성 기능을 사용해서 DDL을 만들 때만 사용된다.</td> <td></td></tr></tbody></table> <h1 id="다양한-매핑-사용"><a href="#다양한-매핑-사용" class="header-anchor">#</a> 다양한 매핑 사용</h1> <p>enum</p> <ul><li>@Enumerated를 사용하여 속성값을 매핑한다.</li></ul> <p>temporal</p> <ul><li>자바의 날짜 타입은 @Temporal을 사용하여 매핑한다.</li></ul> <p>description</p> <ul><li>설명하는 필드는 길이 제한이 없다. 따라서 VARCHAR 타입이 아닌 CLOB 타입으로 지정해야한다. jpa에서는 @Lob으로 매핑할 수 있다.(CLOB, BLOB)</li></ul> <h1 id="db-스키마-자동-생성"><a href="#db-스키마-자동-생성" class="header-anchor">#</a> DB 스키마 자동 생성</h1> <div class="language- extra-class"><pre class="language-text"><code>jpa:
	hibernate:
	  ddl-auto: create or create-drop or update or validate or none
</code></pre></div><p>자동 생성되는 스키마는 DB 방언에 따라 DDL 문이 달라진다.</p> <p>ex. varchar or varchar2</p> <aside>
💡 jpa 2.1부터 validate와 update는 지원하지 않는다.
</aside> <aside>
💡 자바는 카멜케이스 DB는 스네이크 케이스를 사용하는데 옵션으로 ejb.naming.strategy를 사용하면 자동으로 매핑을 해준다. 이 경우에는 수동으로 엔티티에 테이블 명이나 컬럼 명을 생략하면 자동으로 카멜, 스네이크로 매핑해준다.
</aside> <h2 id="🚫-주의-사항"><a href="#🚫-주의-사항" class="header-anchor">#</a> 🚫 주의 사항</h2> <ul><li>운영서버에서 DDL 수정이 가능한 옵션은 절대 사용하면 안된다. (create, create-drop, update)</li> <li>오직 개발 서버에서만 사용해야한다.</li> <li>개발환경에 따른 추천 전략은 다음과 같다.
<ul><li>개발 초기 단계는 create, update</li> <li>초기화 상태로 자동화된 테스트를 진행하는 개발자 환경과 CI서버는 create, create-drop</li> <li>테스트 서버는 update, validate</li> <li>스테이징과 운영서버는 validate, none</li></ul></li></ul> <h1 id="ddl-생성기능"><a href="#ddl-생성기능" class="header-anchor">#</a> DDL 생성기능</h1> <p>회원 이름은 필수 , 10자 초과 x 라는 조건이 있을 때 스키마 자동 생성을 사용하여 어떻게 만들까? 아래와 같이 필드에 설정해주면 된다.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Entity</span>
<span class="token annotation punctuation">@Table</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;MEMBER&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Member</span> <span class="token punctuation">{</span>
		
		<span class="token annotation punctuation">@Id</span>
		<span class="token annotation punctuation">@Column</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;ID&quot;</span><span class="token punctuation">)</span>
		<span class="token keyword">private</span> <span class="token class-name">String</span> id<span class="token punctuation">;</span>

		<span class="token annotation punctuation">@Column</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;NAME&quot;</span><span class="token punctuation">,</span> nullable <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span> length <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">)</span>
		<span class="token keyword">private</span>	<span class="token class-name">String</span> username<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>이번에는 유니크 제약 조건을 만들어주는 @Table의 uniqueConstraints 속성을 알아보자.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Entity</span>
<span class="token annotation punctuation">@Table</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;MEMBER&quot;</span><span class="token punctuation">,</span> uniqueConstraints <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token annotation punctuation">@UniqueContraint</span><span class="token punctuation">(</span>
		name <span class="token operator">=</span> &quot; NAME_AGE_UNIQUE<span class="token punctuation">,</span>
		columnNames <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;NAME&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;AGE&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Member</span> <span class="token punctuation">{</span>
		
		<span class="token annotation punctuation">@Id</span>
		<span class="token annotation punctuation">@Column</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;ID&quot;</span><span class="token punctuation">)</span>
		<span class="token keyword">private</span> <span class="token class-name">String</span> id<span class="token punctuation">;</span>

		<span class="token annotation punctuation">@Column</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;NAME&quot;</span><span class="token punctuation">,</span> nullable <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span> length <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">)</span>
		<span class="token keyword">private</span>	<span class="token class-name">String</span> username<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h1 id="기본키-매핑"><a href="#기본키-매핑" class="header-anchor">#</a> 기본키 매핑</h1> <p>앞서 봤듯이 <code>@Id</code>를 사용하여 기본 키를 할당했는데 만약 DB에서 생성해주는 값을 사용하려면 어떻게 매핑하여야할까? 오라클의 시퀸스 오브젝트 또는 Mysql의 AUTO_INCREMENT 같은 기능을 사용해서 생성된 값을 사용하고 싶다면? jpa에서는 다음과 같이 해결하였다.</p> <ul><li><p>직접 할당 - 기본 키를 애플리케이션에서 직접 할당한다.</p></li> <li><p>자동 생성 - 대리 키 사용방식, @GeneratedValue를 사용하여 적용한다.</p> <ul><li>IDENTITY: 기본 키 생성을 DB에 위임한다.</li> <li>SEQUENCE: DB 시퀸스를 사용해서 기본키를 할당한다.</li> <li>TABLE: 키 생성 테이블을 사용한다.</li></ul> <h2 id="기본-키-직접-할당-전략"><a href="#기본-키-직접-할당-전략" class="header-anchor">#</a> 기본 키 직접 할당 전략</h2> <p>@Id를 사용하여 매핑하면 된다. 가능한 자바 타입은 아래와 같다.</p> <ul><li>자바 기본형</li> <li>자바 wrapper형</li> <li>String</li> <li>java.util.date</li> <li>java.sql.date</li> <li>java.math.BigDecimal</li> <li>jaba.math.BigInteger</li></ul> <p>직접 할당 전략은 <code>em.persist()</code>로 저장하기 전에 애플리케이션에서 기본 키를 직접 할당하는 방법이다. (ex. member.setId(”member1”));</p> <h2 id="⭐identity-전략"><a href="#⭐identity-전략" class="header-anchor">#</a> ⭐IDENTITY 전략</h2> <p>기본 키 생성을 DB에 위임하는 전략이다. 주로 MySQL, PostgreSQL, Server, DB2에서 사용한다.</p> <p>@GeneratedValue (strategy = GenerationType.IDENTITY)를 기본 키에 적용하면 되는데 이 옵션은 이미 DB에 값이 생성되어있어야한다. (값을 구할 수 있을 때 사용 가능)</p> <p>이 전략은 insert 한 후에 기본 키값을 조회할 수 있기 때문에 엔티티에 식별자 값을 할당하려면 jpa는 추가적으로 DB에서 조회를 해야한다. JDBC3에 추가된Statement.getGeneratedKeys()를 사용하면 데이터를 저장하면서 동시에 생성된 기본 키값을 얻어올 수 있어 하이버네이트는 이 메서드를 사용한다.</p> <p>🚫  주의사항</p> <p>엔티티가 영속 상태가 되려면 식별자가 반드시 필요한데 이 전략은 결국에 엔티티를 DB에 저장해야 식별자를 구할 수 있으므로 em.persist()를 호출하는 즉시 InsertSQL이 DB에 저장된다. 그러므로 이 전략은 쓰기 지연이 동작하지 않는다.</p> <h2 id="⭐sequence-전략"><a href="#⭐sequence-전략" class="header-anchor">#</a> ⭐SEQUENCE 전략</h2> <p>유일한 값을 순서대로 생성하는 특별한 DB 오브젝트이다. 오라클, PostgreSQL, DB2, H2에서 사용 가능하다. 사용법은 아래와 같다.</p> <ol><li>시퀸스를 생성해준다.</li></ol> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> BOARD <span class="token punctuation">(</span>
		ID <span class="token keyword">BIGINT</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span>
		<span class="token keyword">DATA</span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>

<span class="token comment">// 시퀸스 생성</span>
<span class="token keyword">CREATE</span> SEQUENCE BOARD_SEQ <span class="token keyword">START</span> <span class="token keyword">WITH</span> <span class="token number">1</span> INCREMENT <span class="token keyword">BY</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre></div><ol><li>시퀸스를 매핑해준다.</li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Entity</span>
<span class="token annotation punctuation">@SequenceGenerator</span><span class="token punctuation">(</span>
		name <span class="token operator">=</span> <span class="token string">&quot;BOARD_SEQ_GENERATOR&quot;</span><span class="token punctuation">,</span>
		sequenceName <span class="token operator">=</span> <span class="token string">&quot;BOARD_SEQ&quot;</span> <span class="token comment">// 매핑할 DB 시퀸스 이름</span>
		initialValue <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> allocationSize <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// 시퀸스 등록</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Board</span> <span class="token punctuation">{</span>
		<span class="token annotation punctuation">@Id</span>
		<span class="token annotation punctuation">@GeneratedValue</span><span class="token punctuation">(</span>strategy <span class="token operator">=</span> <span class="token class-name">GenerationType</span><span class="token punctuation">.</span>SEQUENCE<span class="token punctuation">,</span>
				generator <span class="token operator">=</span> <span class="token string">&quot;BOARD_SEQ_GENERATOR&quot;</span><span class="token punctuation">)</span> <span class="token comment">// 등록한 시퀸스 생성기를 선택.</span>
		<span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>이렇게 등록된 시퀸스(식별자 값)는 em.persist()를 호출할 때 먼저 DB 시퀸스를 사용해서 식별자를 조회한다.</li> <li>그런 다음 조회한 식별자 값을 엔티티 id에 할당한 후에 엔티티를 영속성 컨텍스트에 저장한다.</li> <li>이후 커밋 → 플러시 과정을 거쳐 DB에 저장하게 된다.</li></ul> <table><thead><tr><th>속성</th> <th>기능</th> <th>기본값</th></tr></thead> <tbody><tr><td>name</td> <td>식별자 생성기 이름</td> <td>필수</td></tr> <tr><td>sequenceName</td> <td>DB에 등록되어 있는 시퀸스 이름</td> <td>hibernate_sequence</td></tr> <tr><td>initialValue</td> <td>DDL 생성 시에만 사용됨. 시퀸스 DDL을 생성할 때 처음 시작하는 수를 지정한다.</td> <td>1</td></tr> <tr><td>allocationSize</td> <td>시퀸스 한번 호출에 증가하는 수 (성능 최적화에 사용됨)</td> <td>50</td></tr> <tr><td>catalog. schema</td> <td>DB catalog, schema 이름</td> <td></td></tr></tbody></table> <aside>
  💡 여기서 allocationSize가 50인 이유는 시퀸스를 여러번 호출하지 않기 위해서 이다. 시퀸스를 한번 호출 했을 때 시퀸스를 한번에 50을 증가 시켜 놓은 후 1~50까지를 메모리에 저장하고 그 값을 식별자로 사용한다. 
<p>만약 insert성능에 신경을 쓰지 않아도 되면 size를 1로 줄여도 무방하다.</p></aside> <h3 id="⭐table-전략"><a href="#⭐table-전략" class="header-anchor">#</a> ⭐TABLE 전략</h3> <p>이 전략은 키 생성 전용 테이블을 하나 만들고 여기에 이름과 값으로 사용할 컬럼을 만들어 시퀸스를 흉내내는 전략이다. 그러므로 모든 DB에서 사용가능하다.</p> <ol><li>먼저 테이블을 생성한다.</li></ol> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> MY_SEQUENCES <span class="token punctuation">(</span>
		SEQUNECE_NAME <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
		NEXT_VAL <span class="token keyword">BIGINT</span><span class="token punctuation">,</span>
		<span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span> SEQUENCE_NAME<span class="token punctuation">)</span>
<span class="token punctuation">)</span>
</code></pre></div><p>SEQUNECE_NAME 컬럼을 시퀸스 이름으로 사용하고 next_val 컬럼을 시퀸스 값으로 사용한다. 컬럼의 이름은 변경 가능하다.</p> <ol><li>JPA</li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Entity</span>
<span class="token annotation punctuation">@TableGenerator</span><span class="token punctuation">(</span>
		name <span class="token operator">=</span> <span class="token string">&quot;BOARD_SEQ_GENERATOR&quot;</span><span class="token punctuation">,</span>
		table <span class="token operator">=</span> <span class="token string">&quot;MY_SEQUENCES&quot;</span> <span class="token comment">// 매핑할 DB 테이블 이름</span>
		pkColumnValue <span class="token operator">=</span> <span class="token string">&quot;BOARD_SEQ&quot;</span><span class="token punctuation">,</span> allocationSize <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Board</span> <span class="token punctuation">{</span>
		<span class="token annotation punctuation">@Id</span>
		<span class="token annotation punctuation">@GeneratedValue</span><span class="token punctuation">(</span>strategy <span class="token operator">=</span> <span class="token class-name">GenerationType</span><span class="token punctuation">.</span>TABLE<span class="token punctuation">,</span>
				generator <span class="token operator">=</span> <span class="token string">&quot;BOARD_SEQ_GENERATOR&quot;</span><span class="token punctuation">)</span> <span class="token comment">// 등록한 시퀸스 생성기를 선택.</span>
		<span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><table><thead><tr><th>속성</th> <th>기능</th> <th>기본값</th></tr></thead> <tbody><tr><td>name</td> <td>식별자 생성기 이름</td> <td>필수</td></tr> <tr><td>table</td> <td>키 생성 테이블명</td> <td>hibernate_sequence</td></tr> <tr><td>pkColumnName</td> <td>시퀸스 컬럼명</td> <td>sequence_name</td></tr> <tr><td>valueColumnName</td> <td>시퀸스 값 컬럼명</td> <td>next_val</td></tr> <tr><td>pkColumnValue</td> <td>키로 사용할 값 이름</td> <td>엔티티 이름</td></tr> <tr><td>initialValue</td> <td>초기 값 마지막으로 생성된 값이 기준이다.</td> <td>0</td></tr> <tr><td>allocationSize</td> <td>시퀸스 한 번 호출에 증가하는 수 (성능 최적화에 사용됨)</td> <td>50</td></tr> <tr><td>catalog, schema</td> <td>DB catalog, schema 이름</td> <td></td></tr> <tr><td>uniqueConstraints</td> <td>유니크 제약 조건을 지정할 수 있다.</td> <td></td></tr></tbody></table> <aside>
  💡 JPA 표준 명세서에는 table, pkColumnName, valueColumnName의 기본값은 JPA 구현체가 정의하도록 했다.
  </aside> <table><thead><tr><th>{ pklColumnMame }</th> <th>{ valueColumnName }</th></tr></thead> <tbody><tr><td>{ pkColumnValue }</td> <td>{ initialValue }</td></tr></tbody></table> <h3 id="⭐-auto-전략"><a href="#⭐-auto-전략" class="header-anchor">#</a> ⭐ AUTO 전략</h3> <p>GenerationType.AUTO는 선택한 DB 방언에 따라 자동으로 세가지 전략 중 하나를 선택한다. 장점이라면 DB를 변경해도 코드의 수정이 불필요한 점이있다. 개발 초기 단계에서 보통 사용한다. 그럼 시퀸스나 테이블 전략이 자동으로 선택 됐을때 해당 시퀸스 테이블은 생성을 해야하는가? → 자동으로 JPA가 테이블을 만들어 줄 것이다.</p> <h3 id="기본-키-매핑-정리"><a href="#기본-키-매핑-정리" class="header-anchor">#</a> 기본 키 매핑 정리</h3> <p>영속성 컨텍스트는 식별자 값으로 엔티티를 구분하므로 영속상태로 만들기 위해서는 식별자 값이 필수이다. em.persist()를 호출한 직후에 발생하는 일을 식별자 할당 전략으로 정리하면 다음과 같다.</p> <ul><li>직접 할당 em.persist()를 호출하기 전에 애플리케이션에서 직접 식별자 값을 할당해야한다. 만약 없다면 예외가 발생한다.</li> <li>SEQUENCE : DB 시퀸스에서 식별자 값을 획득한 후 영속성 컨텍스트에 저장한다</li> <li>TABLE : DB 시퀸스 생성용 테이블에서 식별자 값을 구한 후 영속성 컨텍스트에 저장한다.</li> <li>IDENTITY : DB에 엔티티를 저장해서 식별자 값을 구한 후 영속성 컨텍스트에 저장한다.
<ul><li>이 전략을 테이블에 데이터를 저장해야 식별자 값을 얻을 수 있다.</li></ul></li></ul> <h1 id="_4-7-필드와-컬럼-매핑-레퍼런스"><a href="#_4-7-필드와-컬럼-매핑-레퍼런스" class="header-anchor">#</a> 4.7 필드와 컬럼 매핑: 레퍼런스</h1> <p>아래는 jpa가 제공하는 필드와 컬럼 매핑용 어노테이션이다.</p> <table><thead><tr><th>분류</th> <th>어노테이션</th> <th>설명</th></tr></thead> <tbody><tr><td>필드와 컬럼 매핑</td> <td>@Column</td> <td>컬럼을 매핑한다.</td></tr> <tr><td></td> <td>@Enumerated</td> <td>자바의 Enum 타입을 매핑한다.</td></tr> <tr><td></td> <td>@Temporal</td> <td>날짜 타입을 매핑한다.</td></tr> <tr><td></td> <td>@Lob</td> <td>BLOB, CLOB 타입을 매핑한다.</td></tr> <tr><td></td> <td>@Transient</td> <td>특정 필드를 DB에 매핑하지 않는다.</td></tr> <tr><td>기타</td> <td>@Access</td> <td>JPA가 엔티티에 접근하는 방식을 지정한다.</td></tr> <tr><td></td> <td></td> <td></td></tr></tbody></table> <h2 id="⭐-column"><a href="#⭐-column" class="header-anchor">#</a> ⭐ @Column</h2> <p>@Column은 객체 필드를 테이블 컬럼에 매핑한다. 가장 많이 사용되고 기능도 많다. 속성 중에 name, nullable이 제일 많이 사용된다.</p> <table><thead><tr><th>속성</th> <th>기능</th> <th>기본값</th></tr></thead> <tbody><tr><td>name</td> <td>필드와 매핑할 테이블의 컬럼 이름</td> <td>객체의 필드 이름</td></tr> <tr><td>insertable</td> <td></td> <td></td></tr> <tr><td>( 거의 사용되지 않음 )</td> <td>엔티티 저장 시 이 필드도 같이 저장한다. false로 설정하면 이 필드는 DB에 저장하지 않는다. false옵션은 읽기 전용일 때 사용한다.</td> <td>true</td></tr> <tr><td>updatable</td> <td></td> <td></td></tr> <tr><td>(거의 사용되지 않음 )</td> <td>엔티티 저장 시 이 필드도 같이 수정한다. false로 설정하면 이 필드는 DB에 수정하지 않는다. false옵션은 읽기 전용일 때 사용한다.</td> <td>true</td></tr> <tr><td>table</td> <td></td> <td></td></tr> <tr><td>( 거의 사용되지 않음 )</td> <td>하나의 엔티티를 두 개 이상의 테이블에 매핑할 때 사용한다. 지정한 필드를 다른 테이블에 매핑할 수 있다.</td> <td>현재 클래스가 매핑 된 테이블</td></tr> <tr><td>nullable ( DDL )</td> <td>null 값의 허용 여부를 설정한다. false로 설정하면 DDL 생성 시에 not null 제약 조건이 붙는다.</td> <td>true</td></tr> <tr><td>unique ( DDL )</td> <td>@Table의 uniqueConstraints와 같지만 한 컬럼에 간단히 유니크 제약 조건을 걸 때 사용한다. 만약 두 컬럼 이상을 사용해서 유니크 제약 조건을 사용하려면 클래스 레벨에서 @Table.uniqueConstraints를 사용해야한다.</td> <td></td></tr> <tr><td>columnDefinition ( DDL )</td> <td>DB 컬럼 정보를 직접 줄 수 있다.</td> <td>필드의 자바 타입과 방언 정보를 사용해서 적절한 컬럼 타입을 생성한다.</td></tr> <tr><td>length ( DDL )</td> <td>문자 길이 제약 조건. String 타입에만 사용한다.</td> <td>255</td></tr> <tr><td>precision, scale ( DDL )</td> <td>BigDecimal 타입에서 사용한다. ( BigIneger에서도 사용 가능함. ) precision은 소수점을 포함한 전체 자릿수를, scale은 소수의 자릿수다. 참고로 double, float 타입에는 적용되지 않는다. 아주 큰 숫자나 정밀한 소수를 다루어야 할 때만 사용한다.</td> <td>precision = 19,</td></tr> <tr><td>scale = 2</td> <td></td> <td></td></tr></tbody></table> <p>DDL 생성 속성에 따라 어떤 DDL이 생성되는지 확인해보자.</p> <ul><li><p>nullable(DDL 생성 기능)</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Column</span><span class="token punctuation">(</span>nullable <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
<span class="token keyword">private</span> <span class="token class-name">String</span> data<span class="token punctuation">;</span>

<span class="token comment">// 생성된 DDL</span>
data <span class="token function">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> not <span class="token keyword">null</span>
</code></pre></div></li> <li><p>unique(DDL 생성 기능)</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Column</span><span class="token punctuation">(</span>unique <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
<span class="token keyword">private</span> <span class="token class-name">String</span> username<span class="token punctuation">;</span>

<span class="token comment">// 생성된 DDL</span>
alter table <span class="token class-name">Tablename</span>
	add constraint <span class="token class-name">UK_Xxx</span> unique <span class="token punctuation">(</span>username<span class="token punctuation">)</span>
</code></pre></div></li> <li><p>columnDefinition(DDL 생성 기능)</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Column</span><span class="token punctuation">(</span>columnDefinition <span class="token operator">=</span> <span class="token string">&quot;varchar(100) default 'EMPTY'&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">private</span> <span class="token class-name">String</span> data<span class="token punctuation">;</span>

<span class="token comment">// 생성된 DDL</span>
data <span class="token function">varchar</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">'EMPTY'</span>
</code></pre></div></li> <li><p>lengh(DDL 생성 기능)</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Column</span><span class="token punctuation">(</span>length <span class="token operator">=</span> <span class="token number">400</span><span class="token punctuation">)</span>
<span class="token keyword">private</span> <span class="token class-name">String</span> data<span class="token punctuation">;</span>

<span class="token comment">// 생성된 DDL</span>
data <span class="token function">varchar</span><span class="token punctuation">(</span><span class="token number">400</span><span class="token punctuation">)</span>
</code></pre></div></li> <li><p>precision, scale(DDL 생성 기능)</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Column</span><span class="token punctuation">(</span>precision <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">,</span> scale <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">)</span>
<span class="token keyword">private</span> <span class="token class-name">BigDecimal</span> cal<span class="token punctuation">;</span>

<span class="token comment">// 생성된 DDL</span>
cal <span class="token function">numeric</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">//H2, PostgreSQL</span>
cal <span class="token function">number</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">//Oracle</span>
cal <span class="token function">decimal</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">// MySQL</span>
</code></pre></div></li></ul> <aside>
  💡 @Column 생략
  대부분의 기본값이 적용되는데 자바 기본 타입일 때는 nullable 속성에 예외가 있다. 
<p>int data1; //@Column 생략, 자바 기본타입
data1 integer not null // 생성된 DDL</p> <p>Integer data2 //@Column 생략, 객체 타입
data2 integer // 생성된 DDL</p> <p>@Column
int data3; // @Column 사용, 자바 기본 타입
data3 integer // 생성된 DDL</p> <p>그래서 자바 기본 타입에 @Column를 사용하게 되면 nullabla = false를 걸어두는 것이 안전하다.</p></aside> <h2 id="⭐-enumerated"><a href="#⭐-enumerated" class="header-anchor">#</a> ⭐@Enumerated</h2> <p>자바의 enum 타입을 매핑할 때 사용한다.</p> <table><thead><tr><th>속성</th> <th>기능</th> <th>기본값</th></tr></thead> <tbody><tr><td>value</td> <td>- EnumType.ORDINAL : enum 순서를 DB에 저장</td> <td></td></tr> <tr><td>- EnumType.STRING : enum 이름을 DB에 저장</td> <td>EnumType.ORDINAL</td> <td></td></tr></tbody></table> <p>예를 들면</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// enum Class</span>
<span class="token keyword">enum</span> <span class="token class-name">RoleType</span> <span class="token punctuation">{</span>
		ADMIN<span class="token punctuation">,</span> USER
<span class="token punctuation">}</span>

<span class="token comment">// Entity Class</span>
<span class="token annotation punctuation">@Enumerated</span><span class="token punctuation">(</span><span class="token class-name">EnumType</span><span class="token punctuation">.</span>STRING<span class="token punctuation">)</span>
<span class="token keyword">private</span> <span class="token class-name">RoleType</span> roleType<span class="token punctuation">;</span> <span class="token comment">// enum 이름으로 매핑한다.</span>
</code></pre></div><ul><li>member.setRoleType(RoleType.ADMIN);
<ul><li>DB에 문자 <code>ADMIN</code>이 저장됨.</li></ul></li> <li>만약 타입이 ORDINAL이었다면 enum Class에 정의된 순서대로 1이 DB에 저장된다.</li></ul> <aside>
  💡 만약 enum 클래스에 수정이 있을 경우 ORDINAL로 설정된 상태라면 순서 값이 달라지기 때문에 타입을 STRING으로 사용하는 것을 권장한다. (단점은 저장 데이터 크기가 ORDINAL에 비해 크다는 단점이 있다.)
  </aside> <h2 id="⭐-temporal"><a href="#⭐-temporal" class="header-anchor">#</a> ⭐@Temporal</h2> <p>날짜 타입을 매핑할 떄 사용된다. ( java.util.date, java.util.Calendar )</p> <table><thead><tr><th>속성</th> <th>기능</th> <th>기본값</th></tr></thead> <tbody><tr><td>value</td> <td>- TemporalType.DATE : 날짜 , DB DATE 타입과 매핑 ( 예: 2022-05-11)</td> <td></td></tr></tbody></table> <ul><li>TemporalType.TIME : 시간, DB time타입과 매핑 ( 예: 11:11:11)</li> <li>Tempotal.Type.TIMESTAMP: 날짜와 시간, DB timestamp 타입과 매핑 ( 예: 2022-05-11 11:11:11) | 필수로 지정해 주어야 한다.  |</li></ul> <h2 id="⭐-lob"><a href="#⭐-lob" class="header-anchor">#</a> ⭐@Lob</h2> <p>DB BLOB, CLOB 타입과 매핑한다. 속성이 없는 대신에 필드 타입이 문자면 CLOB으로 매핑하고 나머지는 BLOB으로 매핑한다.</p> <ul><li>CLOB : String, char[], java.sql.CLOB</li> <li>BLOB : byte[], java.sql.BLOB</li></ul> <h2 id="⭐-transient"><a href="#⭐-transient" class="header-anchor">#</a> ⭐@Transient</h2> <p>이 필드는 매핑하지 않는다. 따라서 DB에 저장하지 않고 조회하지도 않는다. 객체에 임시로 어떤 값을 보관하고 싶을 때 사용한다.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Transient</span>
<span class="token keyword">private</span> <span class="token class-name">Integer</span> temp<span class="token punctuation">;</span>
</code></pre></div><h2 id="⭐-access"><a href="#⭐-access" class="header-anchor">#</a> ⭐@Access</h2> <p>jpa가 엔티티 데이터에 접근하는 방식을 지정한다.</p> <ul><li><p>필드 접근 : AccessType.FIELD로 지정한다. 필드에 직접 접근하며 필드 접근 권한이 private여도 접근 할 수 있다.</p> <ul><li>@Access를 설정하지 않으면 @Id의 위치를 기준으로 접근 방식이 설정된다.</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Entity</span>
<span class="token annotation punctuation">@Access</span><span class="token punctuation">(</span><span class="token class-name">AccessType</span><span class="token punctuation">.</span>FIELD<span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Member</span> <span class="token punctuation">{</span>
		
		<span class="token annotation punctuation">@Id</span>
		<span class="token keyword">private</span> <span class="token class-name">String</span> id<span class="token punctuation">;</span>

		<span class="token keyword">private</span> <span class="token class-name">String</span> data1<span class="token punctuation">;</span>
		<span class="token keyword">private</span> <span class="token class-name">String</span> data2<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>@Id가 필드에 있으므로 AccessType.FIELD 타입으로 설정한 것과 같다.</li> <li>따라서 @Access는 생략 가능하다.</li></ul></li> <li><p>프로퍼티 접근 : AccessType.PROPERTY로 지정한다. 접근자(Getter)를 사용한다.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Entity</span>
<span class="token annotation punctuation">@Access</span><span class="token punctuation">(</span><span class="token class-name">AccessType</span><span class="token punctuation">.</span>PROPERTY<span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Member</span> <span class="token punctuation">{</span>
		
		<span class="token keyword">private</span> <span class="token class-name">String</span> id<span class="token punctuation">;</span>

		<span class="token keyword">private</span> <span class="token class-name">String</span> data1<span class="token punctuation">;</span>
		<span class="token keyword">private</span> <span class="token class-name">String</span> data2<span class="token punctuation">;</span>

		<span class="token annotation punctuation">@Id</span>
		<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> id<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token annotation punctuation">@Column</span>
		<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getData1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> data1<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getData2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> data2<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>@Id가 프로퍼티에 있으므로 AccessType.PROPERTY타입으로 설정한 것과 같다.</li> <li>따라서 @Access는 생략 가능하다.</li></ul></li> <li><p>아래와 같이 접근 방식으로 함께 사용할 수도 있다.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Entity</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Member</span> <span class="token punctuation">{</span>
		
		<span class="token annotation punctuation">@Id</span>
		<span class="token keyword">private</span> <span class="token class-name">String</span> id<span class="token punctuation">;</span>

		<span class="token annotation punctuation">@Transient</span>
		<span class="token keyword">private</span> <span class="token class-name">String</span> firstName<span class="token punctuation">;</span>

		<span class="token annotation punctuation">@Transient</span>
		<span class="token keyword">private</span> <span class="token class-name">String</span> lastName<span class="token punctuation">;</span>

		<span class="token annotation punctuation">@Access</span><span class="token punctuation">(</span><span class="token class-name">AccessType</span><span class="token punctuation">.</span>PROPERTY<span class="token punctuation">)</span>
		<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getFullName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> firstName <span class="token operator">+</span> lastName<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul></li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">1/12/2025, 12:38:41 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/TIL_Vue/JPA/persistence_manage/persistence_manage.html" class="prev">
        영속성 관리
      </a></span> <span class="next"><a href="/TIL_Vue/JPA/relation_intro/relation_intro.html">
        연관관계 매핑 기초
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/TIL_Vue/assets/js/app.3d91fea7.js" defer></script><script src="/TIL_Vue/assets/js/2.1f7f954a.js" defer></script><script src="/TIL_Vue/assets/js/4.011e6a29.js" defer></script><script src="/TIL_Vue/assets/js/54.b4aed006.js" defer></script>
  </body>
</html>
